<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SDYCG4TVF1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SDYCG4TVF1');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Article details">
    <title>Loading... - 元岳科技 YuanYue Technology</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <style>
        .article-hero {
            min-height: 40vh;
            display: flex;
            align-items: center;
            background-image: url(../images/design/bg.png);
            position: relative;
            overflow: hidden;
            padding-top: 120px;
            padding-bottom: 50px;
            text-align: center;
            color: white;
        }

        .article-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
            background-size: cover;
            background-position: bottom;
        }

        .article-hero .container {
            position: relative;
            z-index: 1;
        }

        .article-meta {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-top: 1rem;
            font-size: 0.95rem;
            opacity: 0.9;
        }

        .article-content-wrapper {
            max-width: 800px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .article-image {
            width: 100%;
            max-width: 800px;
            height: auto;
            border-radius: 12px;
            margin: 2rem auto;
            display: block;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }

        .article-body {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #333;
        }

        .article-body p {
            margin-bottom: 1.5rem;
        }

        .article-body h2, .article-body h3, .article-body h4 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #2d3748;
        }

        .article-body ul, .article-body ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }

        .article-body li {
            margin-bottom: 0.5rem;
        }

        .article-body strong {
            color: #2d3748;
            font-weight: 600;
        }

        .loading-container {
            text-align: center;
            padding: 5rem 2rem;
        }

        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-container {
            text-align: center;
            padding: 5rem 2rem;
            color: #e53e3e;
        }

        .back-button {
            display: inline-block;
            margin-top: 2rem;
            padding: 12px 28px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
    </style>
</head>
<body>
    <header id="header">
        <nav class="container">
            <a href="../index.html" class="logo">元岳科技 | YuanYue Tech</a>
            <ul class="nav-links" id="navLinks">
                <li><a href="../index.html">Home</a></li>
                <li><a href="products.html">Products</a></li>
                <li><a href="solutions.html">Solutions</a></li>
                <li><a href="case-studies.html">Case Studies</a></li>
                <li><a href="blog.html">Resources</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html" class="cta-button">Get Quote</a></li>
            </ul>
            <div class="mobile-menu-toggle" id="mobileMenuToggle">
                <span></span><span></span><span></span>
            </div>
        </nav>
    </header>

    <div id="loadingContainer" class="loading-container">
        <div class="loading-spinner"></div>
        <p>Loading article...</p>
    </div>

    <div id="errorContainer" class="error-container" style="display: none;">
        <h2>Article Not Found</h2>
        <p>Sorry, we couldn't find the article you're looking for.</p>
        <a href="#" id="backButtonError" class="back-button">← Back</a>
    </div>

    <div id="articleContainer" style="display: none;">
        <section class="article-hero">
            <div class="container">
                <h1 id="articleTitle"></h1>
                <div class="article-meta">
                    <span id="articleAuthor"></span>
                    <span>•</span>
                    <span id="articleDate"></span>
                </div>
            </div>
        </section>

        <div class="article-content-wrapper">
            <img id="articleImage" class="article-image" style="display: none;">
            <div id="articleBody" class="article-body"></div>
            <a href="#" id="backButton" class="back-button">← Back</a>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>元岳科技 | YuanYue Tech</h3>
                    <p>Leading provider of AI-powered Digital Human Kiosk solutions for businesses worldwide.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="solutions.html">Solutions</a></li>
                        <li><a href="case-studies.html">Case Studies</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="articles-archive.html">Article Archive</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact</h4>
                    <p>Email: info@yuanyue-tech.com<br>
                    Phone: +1 (555) 123-4567</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 元岳科技 YuanYue Technology. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../js/main.js"></script>
    <script>
        // API configuration
        const API_URL = window.location.hostname === 'localhost'
            ? 'http://localhost:3000/api'
            : '/api';

        // Get article ID from URL parameters
        function getArticleIdFromUrl() {
            const params = new URLSearchParams(window.location.search);
            return params.get('id');
        }

        // Load and display article
        async function loadArticle() {
            const articleId = getArticleIdFromUrl();

            if (!articleId) {
                showError();
                return;
            }

            try {
                const response = await fetch(`${API_URL}/articles/${articleId}`);

                if (!response.ok) {
                    throw new Error('Article not found');
                }

                const article = await response.json();
                displayArticle(article);
            } catch (error) {
                console.error('Error loading article:', error);
                showError();
            }
        }

        // Display article content
        function displayArticle(article) {
            // Update page title and meta
            document.title = `${article.title} - 元岳科技 YuanYue Technology`;

            const metaDescription = document.querySelector('meta[name="description"]');
            if (metaDescription) {
                metaDescription.content = article.summary;
            }

            // Format date
            const date = new Date(article.date);
            const formattedDate = date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            // Update content
            document.getElementById('articleTitle').textContent = article.title;
            document.getElementById('articleAuthor').textContent = `By ${article.author}`;
            document.getElementById('articleDate').textContent = formattedDate;
            document.getElementById('articleBody').innerHTML = article.content;

            // Show image if available
            if (article.image) {
                const imgElement = document.getElementById('articleImage');
                imgElement.src = article.image;
                imgElement.alt = article.title;
                imgElement.style.display = 'block';
            }

            // Hide loading, show article
            document.getElementById('loadingContainer').style.display = 'none';
            document.getElementById('articleContainer').style.display = 'block';
        }

        // Show error message
        function showError() {
            document.getElementById('loadingContainer').style.display = 'none';
            document.getElementById('errorContainer').style.display = 'block';
        }

        // Load article on page load
        document.addEventListener('DOMContentLoaded', loadArticle);

        // 智能返回按钮处理函数
        function handleBackButton(e) {
            e.preventDefault();

            // 检查 referrer (来源页面)
            const referrer = document.referrer;

            // 如果来源是文章归档页,返回归档页
            if (referrer && referrer.includes('articles-archive.html')) {
                window.location.href = './articles-archive.html';
            }
            // 如果有浏览器历史记录,使用浏览器后退
            else if (window.history.length > 1) {
                window.history.back();
            }
            // 否则返回首页
            else {
                window.location.href = '../index.html';
            }
        }

        // 为所有返回按钮添加事件监听
        document.addEventListener('DOMContentLoaded', function() {
            const backButton = document.getElementById('backButton');
            const backButtonError = document.getElementById('backButtonError');

            if (backButton) {
                backButton.addEventListener('click', handleBackButton);
            }

            if (backButtonError) {
                backButtonError.addEventListener('click', handleBackButton);
            }
        });
    </script>
</body>
</html>
